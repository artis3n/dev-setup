- name: All Tasks
  hosts: all
  connection: local
  gather_facts: yes
  vars_files:
    - files/vars.yml
  collections:
    - artis3n.github
  tasks:
    - name: Setup | Scripts folder
      ansible.builtin.file:
        path: '{{ install_dir }}'
        state: directory
        mode: 0755

    - ansible.builtin.import_tasks: tasks/packages.yml
      tags: packages

    - ansible.builtin.import_tasks: tasks/terminal.yml
      tags: terminal

    - ansible.builtin.import_tasks: tasks/golang.yml
      tags:
        - language
        - golang

    - ansible.builtin.import_tasks: tasks/java.yml
      tags:
        - language
        - java

    - ansible.builtin.import_tasks: tasks/ruby.yml
      tags:
        - language
        - ruby

    - ansible.builtin.import_tasks: tasks/node.yml
      tags: node

    - ansible.builtin.import_tasks: tasks/python.yml
      tags: python

    - ansible.builtin.import_tasks: tasks/git.yml
      tags: git

    - ansible.builtin.import_tasks: tasks/hashicorp.yml
      tags: hashicorp

    - ansible.builtin.import_tasks: tasks/cloud.yml
      tags: cloud

    - ansible.builtin.import_tasks: tasks/docker.yml
      tags: docker

    - ansible.builtin.import_tasks: tasks/applications/jetbrains.yml
      tags:
        - applications
        - jetbrains

    - ansible.builtin.import_tasks: tasks/ssh.yml
      tags: ssh

    - ansible.builtin.import_tasks: tasks/popos.yml
      tags: popos

    - ansible.builtin.import_tasks: tasks/applications/vmware.yml
      when: "'vmware' in group_names"
      tags:
        - applications
        - vmware

    - ansible.builtin.import_tasks: tasks/brew.yml
      tags: brew

    - ansible.builtin.import_role:
        name: artis3n.tailscale
      vars:
        tailscale_auth_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32313231643962663130656134646639303633316464636262326334323161323232376230653433
          3465633637663531333136663430646531393064623030630a383338396537383734343539363466
          62373533616466633535323530376438323562363263363063373834303963393065363334653937
          3363353464343333350a333965353431396163653437313731313364363439313432666236626430
          33316636346631636264333734323935646533323736303966333036376362653439

  handlers:
    - ansible.builtin.import_tasks: handlers/handlers.yml
